# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –ø—Ä–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–¥–ø–∏—Å–∫–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ. SQL –∑–∞–ø—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç "No rows returned".

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏

**–ë—ã–ª–æ:** –ü–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–≥–∏–æ–Ω–∞ `UA`
**–°—Ç–∞–ª–æ:** –ü–æ–¥–ø–∏—Å–∫–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –¥–ª—è –ª—é–±–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –ø–ª–∞–Ω

```typescript
// –ë—ã–ª–æ:
if (planId && region === 'UA') { ... }

// –°—Ç–∞–ª–æ:
if (planId) {
  const isUA = region === 'UA';
  // –°–æ–∑–¥–∞–µ–º –ø–æ–¥–ø–∏—Å–∫—É –¥–ª—è –ª—é–±–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞
  payment_method: isUA ? 'manual' : 'stripe'
}
```

### 2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –≤ –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞ –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ:
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –≤ API endpoint
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è planId
- –î–µ—Ç–∞–ª–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
- –û—à–∏–±–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `/onboarding` –∏–ª–∏ `/ukr/onboarding`
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω (–ª—é–±–æ–π, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ UA)
3. –í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥
4. –í–≤–µ–¥–∏—Ç–µ URL –∫–ª–∏–Ω–∏–∫–∏
5. –ü—Ä–æ–π–¥–∏—Ç–µ –≤—Å–µ —à–∞–≥–∏
6. **–ù–∞ —à–∞–≥–µ Pricing –≤—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞–Ω** (Starter/Growth/Enterprise)
7. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞:

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `pnpm dev`, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:

```
[Onboarding] Sending project creation request: { planId: 'starter', region: 'UA', ... }
[CreateProject] Received request data: { planId: 'starter', region: 'UA', ... }
[CreateProject] Checking subscription creation: { planId: 'starter', region: 'UA', ... }
[CreateProject] Creating subscription with data: { ... }
[CreateProject] ‚úÖ Created pending subscription: { userId: '...', subscriptionId: '...', ... }
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```sql
SELECT 
  s.id,
  s.plan_id,
  s.plan_name,
  s.payment_status,
  s.payment_method,
  a.email,
  a.name
FROM public.subscriptions s
LEFT JOIN public.accounts a ON a.id = s.account_id
ORDER BY s.created_at DESC;
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:

–û—Ç–∫—Ä–æ–π—Ç–µ `/admin/users` - –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –ø–æ–¥–ø–∏—Å–∫–∞ —Å –ø–ª–∞–Ω–æ–º.

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü–ª–∞–Ω –Ω–µ –≤—ã–±—Ä–∞–Ω –Ω–∞ —à–∞–≥–µ Pricing

**–°–∏–º–ø—Ç–æ–º:** –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ `planId: ''` –∏–ª–∏ `planId: undefined`

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —à–∞–≥–µ Pricing –≤—ã–±—Ä–∞–Ω –ø–ª–∞–Ω –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∞–∫–∫–∞—É–Ω—Ç–∞.

### –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏

**–°–∏–º–ø—Ç–æ–º:** –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ `[CreateProject] Error creating subscription:`

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –¢–∞–±–ª–∏—Ü–∞ `subscriptions` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
2. –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
3. –ù–µ—Ç –æ—à–∏–±–æ–∫ RLS

### –î–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º:** –í –ª–æ–≥–∞—Ö `[CreateProject] Received request data:` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `onboardingData` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è `planId` –∏ `region`.

## –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

1. **–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - –†–µ–≥–∏–æ–Ω: Ukraine (UA)
   - –ü–ª–∞–Ω: Starter
   - –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É:**
   ```sql
   SELECT * FROM public.subscriptions ORDER BY created_at DESC LIMIT 1;
   ```
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å —Å `plan_id = 'starter'`

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `/admin/users`
   - –î–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø–ª–∞–Ω "Starter"

## –ì–æ—Ç–æ–≤–æ! üéâ

–¢–µ–ø–µ—Ä—å –ø–æ–¥–ø–∏—Å–∫–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –¥–ª—è –≤—Å–µ—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –ø–ª–∞–Ω.




