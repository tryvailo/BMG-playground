# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è subscriptions –ø—Ä–∏–º–µ–Ω–µ–Ω–∞

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

–ú–∏–≥—Ä–∞—Ü–∏—è `20250130_add_subscriptions_table.sql` —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞. –¢–∞–±–ª–∏—Ü–∞ `subscriptions` —Å–æ–∑–¥–∞–Ω–∞ —Å–æ –≤—Å–µ–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –ø–æ–ª—è–º–∏, –∏–Ω–¥–µ–∫—Å–∞–º–∏, RLS –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ –∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

–û—Ç–∫—Ä–æ–π—Ç–µ `/admin/users` –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5 –∏–ª–∏ Cmd/Ctrl + R).

–¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è:
- ‚úÖ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–¥–∞–∂–µ –±–µ–∑ –ø–æ–¥–ø–∏—Å–æ–∫)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: Total Accounts –∏ Total Subscriptions
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ (Pending, Paid, etc.)

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
```
[AdminUsers] Loaded: { subscriptions: X, accounts: Y }
```

–í –ª–æ–≥–∞—Ö —Å–µ—Ä–≤–µ—Ä–∞ (—Ç–µ—Ä–º–∏–Ω–∞–ª, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `pnpm dev`):
```
[AdminSubscriptions] Admin client initialized successfully
[AdminSubscriptions] Attempting to load subscriptions...
[AdminSubscriptions] Loaded subscriptions: X
[AdminSubscriptions] Attempting to load accounts...
[AdminSubscriptions] Loaded accounts: Y
```

### 3. –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –µ—Å—Ç—å –æ—à–∏–±–∫–∏

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Supabase Dashboard:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:54323
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Table Editor**
3. –ù–∞–π–¥–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—É `subscriptions`
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∏–º–µ–µ—Ç –≤—Å–µ –ø–æ–ª—è

**–ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∑–∞–ø—Ä–æ—Å:**

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
SELECT EXISTS (
  SELECT FROM information_schema.tables 
  WHERE table_schema = 'public' 
  AND table_name = 'subscriptions'
);

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
SELECT COUNT(*) FROM public.subscriptions;
SELECT * FROM public.subscriptions LIMIT 5;
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/onboarding` –∏–ª–∏ `/ukr/onboarding`
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω: **Ukraine (UA)**
   - –í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞–Ω
   - –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç
   - –ü–æ–¥–ø–∏—Å–∫–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–∑–¥–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ `/admin/users`
   - –ù–∞–π–¥–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–¥–ø–∏—Å–∫–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º **Pending**

3. **–û—Ç–º–µ—Ç—å—Ç–µ –æ–ø–ª–∞—Ç—É:**
   - –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Mark as Paid"**
   - –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –Ω–∞ **Paid**

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã

–¢–∞–±–ª–∏—Ü–∞ `subscriptions` —Å–æ–¥–µ—Ä–∂–∏—Ç:
- ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è: `id`, `account_id`, `plan_id`, `plan_name`, `price`
- ‚úÖ –ü–æ–ª—è –¥–ª—è –æ–ø–ª–∞—Ç—ã: `payment_method`, `payment_status`, `invoice_number`
- ‚úÖ –ü–æ–ª—è –¥–ª—è Stripe: `stripe_subscription_id`, `stripe_customer_id`
- ‚úÖ –ü–æ–ª—è –¥–ª—è —Ä—É—á–Ω–æ–π –æ–ø–ª–∞—Ç—ã: `paid_at`, `paid_by`, `expires_at`
- ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: `metadata` (jsonb)
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `updated_at`

## –ì–æ—Ç–æ–≤–æ! üéâ

–ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Supabase –∑–∞–ø—É—â–µ–Ω.



