# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—É—Å—Ç—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ Schema.org

## üîç –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –°–∞–π—Ç —Å Schema.org (adonis.com.ua)
```
‚úÖ HTML —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω: 1,047,916 characters
‚úÖ JSON-LD –Ω–∞–π–¥–µ–Ω: 1 script tag
‚úÖ –¢–∏–ø—ã –∏–∑–≤–ª–µ—á–µ–Ω—ã: MedicalOrganization, Organization, WebSite, etc.
‚úÖ hasMedicalOrganization: true
‚úÖ –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ auditResult
```

### –¢–µ—Å—Ç 2: –°–∞–π—Ç –±–µ–∑ Schema.org (example.com)
```
‚úÖ HTML —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω: 513 characters
‚ö†Ô∏è  JSON-LD –Ω–µ –Ω–∞–π–¥–µ–Ω
‚úÖ –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è false (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Å–∞–π—Ç–∞ –±–µ–∑ —Ä–∞–∑–º–µ—Ç–∫–∏)
```

## üìä –ê–Ω–∞–ª–∏–∑ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### –≠—Ç–∞–ø 1: –ü–æ–ª—É—á–µ–Ω–∏–µ HTML
```typescript
// ephemeral-audit.ts:616-629
fetch(normalizedUrl, {...})
  .then((html) => parseHtml(html, normalizedUrl))
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå Timeout (10 —Å–µ–∫—É–Ω–¥)
- ‚ùå CORS –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- ‚ùå HTTP –æ—à–∏–±–∫–∏ (404, 500, etc.)
- ‚ùå –°–µ—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `[EphemeralAudit] Error fetching HTML`

### –≠—Ç–∞–ø 2: –ü–∞—Ä—Å–∏–Ω–≥ HTML –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ Schema
```typescript
// html-parser.ts:analyzeSchemaMarkup()
const jsonLdScripts = $('script[type="application/ld+json"]');
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ù–µ—Ç JSON-LD –±–ª–æ–∫–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- ‚ùå JSON-LD –≤ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- ‚ùå HTML entities –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
- ‚ùå –í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `[SchemaAnalysis]`

### –≠—Ç–∞–ø 3: –ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö
```typescript
// ephemeral-audit.ts:692-701
const schema = htmlData?.schema || { /* fallback */ };
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå `htmlData` = null (HTML –Ω–µ –ø–æ–ª—É—á–µ–Ω)
- ‚ùå `htmlData.schema` = undefined
- ‚úÖ Fallback –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `[EphemeralAudit] Final schema mapping`

### –≠—Ç–∞–ø 4: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```typescript
// ephemeral-audit.ts:755-764
schema: {
  hasMedicalOrg: schema.hasMedicalOrganization,
  hasLocalBusiness: schema.hasLocalBusiness,
  // ...
}
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–º–µ–Ω –ø–æ–ª–µ–π (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ JSON-LD
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ HTML entities
- ‚úÖ –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ @graph
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª–Ω—ã—Ö URL (https://schema.org/Type)

### 2. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö JSON-LD –±–ª–æ–∫–æ–≤
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

### 3. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ Fallback –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ HTML
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ fetch
- ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ schema

## üéØ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—É—Å—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏—á–∏–Ω–∞ 1: –°–∞–π—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç Schema.org —Ä–∞–∑–º–µ—Ç–∫—É
**–°–∏–º–ø—Ç–æ–º—ã:**
- –õ–æ–≥–∏: `[SchemaAnalysis] No JSON-LD script tags found`
- –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è false

**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –°–∞–π—Ç –ø—Ä–æ—Å—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Schema.org.

### –ü—Ä–∏—á–∏–Ω–∞ 2: HTML –Ω–µ –ø–æ–ª—É—á–µ–Ω
**–°–∏–º–ø—Ç–æ–º—ã:**
- –õ–æ–≥–∏: `[EphemeralAudit] Error fetching HTML`
- `htmlData` = null
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback —Å false –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- Timeout (10 —Å–µ–∫—É–Ω–¥)
- CORS –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
- HTTP –æ—à–∏–±–∫–∏
- –°–µ—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:** 
- –£–≤–µ–ª–∏—á–∏—Ç—å timeout
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏ –¥–ª—è CORS
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–∞

### –ü—Ä–∏—á–∏–Ω–∞ 3: JSON-LD –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π
**–°–∏–º–ø—Ç–æ–º—ã:**
- –õ–æ–≥–∏: `[SchemaAnalysis] Failed to parse JSON-LD content`
- JSON-LD –±–ª–æ–∫–∏ –Ω–∞–π–¥–µ–Ω—ã, –Ω–æ –Ω–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:** –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTML entities –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤.

### –ü—Ä–∏—á–∏–Ω–∞ 4: –¢–∏–ø—ã –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–∂–∏–¥–∞–µ–º—ã–º
**–°–∏–º–ø—Ç–æ–º—ã:**
- JSON-LD –Ω–∞–π–¥–µ–Ω –∏ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω
- –¢–∏–ø—ã –∏–∑–≤–ª–µ—á–µ–Ω—ã, –Ω–æ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –æ–∂–∏–¥–∞–µ–º—ã–º–∏
- –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã

**–†–µ—à–µ–Ω–∏–µ:** –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `hasSchemaType()` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤.

## üìã –ö–∞–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
–û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console –∏ –Ω–∞–π–¥–∏—Ç–µ:
- `[EphemeralAudit] HTML parsed successfully` - HTML –ø–æ–ª—É—á–µ–Ω
- `[SchemaAnalysis] Found X JSON-LD script tag(s)` - JSON-LD –Ω–∞–π–¥–µ–Ω
- `[SchemaAnalysis] Extracted types from JSON-LD: [...]` - –¢–∏–ø—ã –∏–∑–≤–ª–µ—á–µ–Ω—ã
- `[EphemeralAudit] Final schema mapping:` - –§–∏–Ω–∞–ª—å–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ debug —Å–∫—Ä–∏–ø—Ç
```bash
cd apps/web
npx tsx scripts/debug-schema-analysis.ts <URL>
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- –ü–æ–ª—É—á–µ–Ω –ª–∏ HTML
- –ù–∞–π–¥–µ–Ω –ª–∏ JSON-LD
- –ö–∞–∫–∏–µ —Ç–∏–ø—ã –∏–∑–≤–ª–µ—á–µ–Ω—ã
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ parseResult –∏ auditResult

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ HTML –≤—Ä—É—á–Ω—É—é
–û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Üí View Source ‚Üí –ù–∞–π–¥–∏—Ç–µ:
```html
<script type="application/ld+json">
{...}
</script>
```

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
1. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–≥–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ `htmlData` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
3. ‚úÖ –£–≤–µ–ª–∏—á—å—Ç–µ timeout –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Å–∞–π—Ç–æ–≤
4. ‚úÖ –î–æ–±–∞–≤—å—Ç–µ retry –ª–æ–≥–∏–∫—É –¥–ª—è fetch

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∞–π—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç Schema.org —Ä–∞–∑–º–µ—Ç–∫—É
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [Google Rich Results Test](https://search.google.com/test/rich-results) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–∑–º–µ—Ç–∫–∏

## üìù –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤

### –£—Å–ø–µ—à–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ:
```
[EphemeralAudit] HTML parsed successfully
[SchemaAnalysis] Found 1 JSON-LD script tag(s)
[SchemaAnalysis] Extracted types from JSON-LD: ['MedicalOrganization', 'Organization']
[SchemaAnalysis] hasMedicalOrganization: true
[EphemeralAudit] Final schema mapping:
  hasMedicalOrganization: true ‚Üí hasMedicalOrg: true
```

### –ü—Ä–æ–±–ª–µ–º–∞ —Å HTML:
```
[EphemeralAudit] Error fetching HTML: Error: HTTP 404: Not Found
[EphemeralAudit] Schema analysis will be skipped due to HTML fetch failure
```

### –ù–µ—Ç JSON-LD:
```
[SchemaAnalysis] No JSON-LD script tags found
[EphemeralAudit] Final schema mapping:
  hasMedicalOrganization: false ‚Üí hasMedicalOrg: false
```

## ‚úÖ –ò—Ç–æ–≥

**–ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.** –ü—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑-–∑–∞:
1. –°–∞–π—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç Schema.org —Ä–∞–∑–º–µ—Ç–∫—É (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)
2. HTML –Ω–µ –ø–æ–ª—É—á–µ–Ω (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏)
3. JSON-LD –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π (—É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞)

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.**



